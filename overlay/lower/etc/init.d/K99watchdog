#!/bin/sh

DAEMON="watchdog"
DAEMON_ARGS="-T ${watchdog_timeout:-60} ${watchdog_device:-/dev/watchdog}"
PIDFILE="/var/run/$DAEMON.pid"

. /etc/init.d/rc.common

start() {
	starting
	[ "true" = "$(fw_printenv -n disable_watchdog)" ] && quit "Disabled"
	start_daemon
}

stop() {
	stopping
	stop_daemon
}

kill() {
	stopping
	kill_daemon
}

case "$1" in
	start)
		start
		;;
	stop)
		stop
		;;

	reload | restart)
		stop
		sleep 1
		start
		;;

	kill)
		kill
		;;

	*)
		echo "Usage: $0 {start|stop|restart}"
		exit 1
		;;
esac

exit 0
